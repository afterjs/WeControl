<!DOCTYPE html>
<html lang="pt">
<head>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">
    <title>WeControl</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animsition/4.0.2/css/animsition.css" rel="stylesheet" media="all">
    <link href="hamburgers/hamburgers.min.css" rel="stylesheet" media="all"> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap5.min.css">
    <link href="css/backmain.css" rel="stylesheet" media="all">
    <link href="css/style.css" rel="stylesheet" media="all">
    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
</head>
<body  class="animsition">
  
  <div class="page-wrapper">
    <!-- MENU TELEMOVEL-->
    <header class="header-mobile d-block d-lg-none">
      <div class="header-mobile__bar">
        <div class="container-fluid">
          <div class="header-mobile-inner">
            <a class="logo menu" data-pagina="" href="#"><img src="img/logo-01.png" id="img-logo" class="img-logo" alt="Cool Admin" style="
              margin-left: auto;
              margin-right: auto;
              display: block;
          "></a>
            <button class="hamburger hamburger--slider" type="button">
              <span class="hamburger-box">
                  <span class="hamburger-inner"></span>
              </span>
             </button>
          </div>
        </div>
      </div>
      <nav class="navbar-mobile">
        <div class="container-fluid">
          <ul class="navbar-mobile__list list-unstyled">
            <li class="has-sub">
              <li>
                <a href="works.html" class="menu"><i class="fas fa-plus"></i>Gerir Trabalhos</a>
              </li>
              <li>
                <a href="users.html" class="menu"><i class="fas fa-plus"></i>Gerir Utilizadores</a>
              </li>
              <li>
                <a href="logs.html" class="menu"><i class="fas fa-id-card"></i>Logs</a>
              </li>
          </li>

            <li>
              <a href="#" id="logout-btn" class="menu"><i class="fas fa-sign-out-alt"></i>Logout</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>



    <aside class="menu-sidebar d-none d-lg-block">
      <div class="logo">
        <a href="users.html" class="menu">
          <img src="img/logo-01.png" id="img-logo" class="img-logo" alt="Cool Admin" style="
          margin-left: auto;
          margin-right: auto;
          display: block;
      ">
      </a>
      </div>
      <div class="menu-sidebar__content js-scrollbar1">
        <nav class="navbar-sidebar">
          <ul class="list-unstyled navbar__list">
         
          
            <li class="has-sub">
              <li>
                <a href="works.html" class="menu"><i class="fas fa-plus"></i>Gerir Trabalhos</a>
              </li>
              <li>
                <a href="users.html" class="menu"><i class="fas fa-plus"></i>Gerir Utilizadores</a>
              </li>
              <li>
                <a href="logs.html" class="menu"><i class="fas fa-id-card"></i>Logs</a>
              </li>
          </li>


          </ul>
        </nav>
      </div>
    </aside>

    <div class="page-container">

      <header class="header-desktop" id="header-desktop">
     

        <div class="section__content section__content--p30">
          <div class="container-fluid">
            <div class="header-wrap">
              <form class="form-header"></form>
              <div class="header-button">
                <div class="account-wrap">
                  <div class="account-item clearfix js-item-menu">
                    <div class="image">
                      <img src="img/logojn.png" alt="Avatar" />
                    </div>
                    <div class="nome-menu">
                      <a>
                       Administração
                      </a>
                    <!-- <i class="fas fa-sms fa-2x" style="color: red;" aria-hidden="true"></i>-->
                      <i class="fas fa-sort-down"></i>
                    </div>
                    <div class="account-dropdown js-dropdown">
                      <div class="info clearfix">
                        <div class="image">
                          <a href="#">
                          <img src="img/logojn.png" alt="John Doe">
                        </a>
                        </div>
                        <div class="content">
                          <h5 class="name">
                            <a href="#">
                              Administração
                            </a>
                          </h5>
                          <span class="email"></span>
                        </div>
                      </div>

                      <div class="account-dropdown__footer">
                       <!-- <div class="account-dropdown__item">
                          <a href="definicoes.php">
                          <i class="zmdi zmdi-settings"></i>Definições</a>
                        </div>-->
                        <a href="#" onclick="logout()">
                            <i class="zmdi zmdi-power"></i>Logout</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
  
      <div class="main-content">
        <div class="section__content section__content--p30">
          <div class="container-fluid">
            <div class="row">
            </div>
            <div class="col-lg-12" style="
            text-align: center;
        ">
              <div class="table-responsive table--no-card m-b-30">

                <table id="tableUser" class="table table-striped" style="width:100%">
                  <thead>
                      <tr>
                          <th>Identificador</th>
                          <th>Descrição da Log</th>
                          <th>Data</th>
                      </tr>
                  </thead>
                  <tbody>
                  </tbody>            
              </table>
              </div>
            </div>
          </div>
        </div>
      </div>
  

      

     

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>            
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animsition/4.0.2/js/animsition.js"></script>
<script src="https://kit.fontawesome.com/ecfbd6ed72.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/i18n/defaults-pt_BR.min.js"></script>
<script src="js/main.js"></script>



<script type="text/javascript">

verificaTipo();
  verificaLogin();
  
$(document).ready(function() {
  let t = $('#tableUser').DataTable();
  getLogs();
  function getLogs() {
     axios.get('http://localhost:3000/log/', {
         headers: {
             //Adicionar a Authorization se for necessário e a API estiver bloqueada pelo middleware
              'Authorization': sessionStorage.getItem("token"),
              'Content-Type': 'application/json'
         },
     })
       .then(response => {         
           $.each(response.data, function(i, u) {
            t.row.add( [
                   u.id,
                   u.info,
                   u.data,
               ] ).node().id = u.id;
           t.draw( false );

           });

       })
       .catch(function (error) {
          
           console.log(error);
       })
       .then(function () {
           // always executed
       });
}


});

</script>

</body>


</html>